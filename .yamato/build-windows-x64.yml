windows-c-libraries:
  name: Build protobuf - Windows 10 x64 with VS 2017

  agent:
    type: Unity::VM
    image: platform-foundation/windows-bokken:latest
    flavor: b1.medium

  artifacts:
    build_win:
      paths:
        - builds/**

  commands:
    - .\bee\bee win64_vs2015

csharp-bindings:
  name: Build C# Bindings

  agent:
    type: Unity::VM
    image: platform-foundation/windows-bokken:latest
    flavor: b1.medium

  artifacts:
    build_win:
      paths:
        - csharp/src/Google.Protobuf/bin/Debug/**

  commands:
    - |
      cd csharp
      powershell -File install_dotnet_sdk.ps1
      buildall.bat